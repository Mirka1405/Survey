<!-- templates/survey.html -->
{% extends "base.html" %}

{% block content %}
<h1>{{ roles[role] }} Survey</h1>

<form action="{{ url_for('submit') }}" method="POST">
    <input type="hidden" name="role" value="{{ role }}">
    
    <div class="form-group">
        <label for="respondent_name">Имя (необязательно):</label>
        <input type="text" id="respondent_name" name="respondent_name" 
               placeholder="Имя">
    </div>
    
    {% for category_id, questions in role_config.items() %}
    <div class="category-section">
        <h3>{{ categories[category_id] }}</h3>
        
        {% for question in questions %}
        <div class="question-item">
            <div class="question-text">{{ question }}</div>
            <div class="rating-scale">
                {% for i in range(1, 11) %}
                <div class="rating-option">
                    <input type="radio" 
                           name="rating_{{ category_id }}_{{ loop.index0 }}" 
                           value="{{ i }}" 
                           {% if i == 5 %}checked{% endif %}
                           required>
                    <label>{{ i }}</label>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
    
    {% if open_questions %}
    <div class="category-section">
        <h3>Вопросы на развернутые ответы</h3>
        {% for question in open_questions %}
        <div class="open-question">
            <label>{{ question }}</label>
            <textarea name="open_{{ loop.index0 }}" 
                      placeholder="Ответ..."></textarea>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <button type="submit">Отправить</button>
</form>
{% endblock %}